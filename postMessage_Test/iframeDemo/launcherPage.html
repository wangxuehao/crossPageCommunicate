<html>
<head>
  <title>postMessage Demo - iframe mainPage</title>
</head>
<body>
  main page
  <input type="button" value="send message" onclick="sendMessage()">
  <br>
  <iframe src="//iframe.iqiyi.com:9023/postMessage_Test/iframeDemo/iframePage.html" id="sub" 
  style="width:100%;height:500px;"></iframe>
</body>
</html>
<script>
  window.addEventListener('message',function(event){
    onMessage(event);
  },false);

  var index = 0;
  function onMessage(event){
    // console.log(event.origin +' '+event.data+' '+event.source);
    var p = document.createElement('p');
    p.innerHTML= ++index+":  "+"eventOrign："+event.origin +"; "+"eventData："+event.data;
    document.body.appendChild(p);
  }
  
  function sendMessage(){
    var subPage = document.getElementById('sub');
    var targetOrigin = 'http://iframe.iqiyi.com:9023'; 
    subPage.contentWindow.postMessage('data from mainPage',targetOrigin);
  }
</script>